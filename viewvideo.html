<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>Better Faster Stronger</title>

  <!-- Bootstrap Core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="css/simple-sidebar.css" rel="stylesheet">
  
  <!-- Custom CSS for comments section-->
  <link href="css/comments.css" rel="stylesheet">
  <!--videojs-->
  <link href="http://vjs.zencdn.net/5.19.1/video-js.css" rel="stylesheet">
  <link href="css/videojs.markers.css" rel="stylesheet">
  <!-- If you'd like to support IE8 -->
  <script src="http://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>

  <!--video js -->
  <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
  <script src="http://vjs.zencdn.net/5.19.1/video.js"></script>
  <script src='js/videojs-markers.js'></script>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- jQuery -->
  <script src="js/jquery.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script src="js/bootstrap.min.js"></script>
  <link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
  <script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
  <script>

            
   $(document).ready(function(){

      var player = videojs('#my-video');
      var markers = [
        {time: 13, text: "advance is OK, knees could be more bent, maintain more distance between front and back foot"},
        {time: 18,  text: " advance + lunge, too slow"},
        {time: 39,text: "twitched before lunge. lunge bad, want arms to help"},
        {time: 51,  text: " too many advances"},
        {time: 131,  text: "advance, feet come too close together, basically walking in a straight line"},
        {time: 165,  text: "flèche try, didn’t work out, PARRIED "},
        {time: 183,  text: "lunge, too low on the knees, leg movement is too exaggerated, trying to feint"},
        {time: 207,  text: "body too leaned forward"},
        {time: 219,  text: "bad lunge, ankle folded underneath, could lead to injury, back foot should not leave ground"},
        {time: 260,  text: "feet are too close, can’t retreat from this position"},
        {time: 299,  text: " please do not kick your opponent"},
        {time: 350,  text: " bad fleche, don’t collide into your opponent. why did you take a knee?"}
      ];

      //load the marker plugin
       player.markers({
          markerTip:{
             display: true,
             text: function(marker){
                return Math.floor(marker.time/60) + ":" + marker.time%60;
             },
             time: function(marker) {
                 return marker.time;
              }
          },
          breakOverlay:{
             display: true,
             displayTime: 3,
             text: function(marker) {
                return  marker.text;
             }
          },
          onMarkerReached: function(marker) {
            console.log(marker);
            $(".comment-text").addClass("truncate");
            $(".comment-text").removeAttr("style", "background-color");
            $(".compare-btn").css("display", "none");
            $("#" + marker.time).css("background-color", "yellow");
            $("#" + marker.time).removeClass("truncate");
            $("#" + marker.time).focus();
            $("#compare-btn" + marker.time).css("display", "block");
          },
          markers: markers
       });
      // insert marker list
      for(var i =0; i < markers.length; i++){

         var item = $("<div class='comment-text truncate' id=" + markers[i].time + " data-index='"+i+"'><a href='#'>"+ Math.floor(markers[i].time/60) + ":" + markers[i].time%60 + ": " + markers[i].text+"</a></div><button class='btn btn-info compare-btn' id='compare-btn" + markers[i].time + "' style='display:none'>Compare Self to Pro</button>");
         $("#comments").append(item);
      }

      // set up click event
      $(".comment-text").click(function(){
         var index = $(this).data("index");
         $(".comment-text").addClass("truncate");
         $(".comment-text").removeAttr("style", "background-color");
         $(".compare-btn").css("display", "none");

         $(this).removeClass("truncate");
         $(this).css("background-color", "yellow");
         $("#compare-btn" + markers[index].time).css("display", "block");
         player.currentTime(markers[index].time);
      });

   });

   // listener for privacy dropdown
    $(function(){

      $(".dropdown-menu li a").click(function() {
        $(".dropdown-menu li a").css("background-color", "white");
        $(this).css("background-color", "pink");



   });

});

  </script>

</head>

<body>
  <div id="wrapper" class="toggled">

    <!-- Sidebar -->
    <div id="sidebar-wrapper">
      <ul class="sidebar-nav">
        <li class="sidebar-brand">
          <a href="./index.html">My Videos</a>
        </li>
        <li>
          <a href="./team.html">Team Videos</a>
        </li>
        <li>
          <a href="./stats.html">My Stats</a>
        </li>
        <li>
          <a href="./contact.html">Contact</a>
        </li>
      </ul>
    </div>

    <div id="page-content-wrapper">
      <div class="container-fluid">

        <!-- Header row -->
        <div class="row">
          <div class="col-lg-10">
            <!-- Search bar at the top -->
            <form action="" class="navbar-form navbar-left">
               <div class="input-group">
                 <input type="Search" placeholder="Search..." class="form-control" />
                 <div class="input-group-btn">
                   <button class="btn btn-info">
                   <span class="glyphicon glyphicon-search"></span>
                   </button>
                 </div>
               </div>
            </form>
          </div>
          <div class="col-lg-2">
            <!-- Profile icon at the top -->
            <div class="dropdown">
              <img src="./images/profile.png" width="70px" class="dropdown-toggle" id="dropdownMenu1" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
              </button>
              <ul class="dropdown-menu" aria-labelledby="dropdownMenu1">
                <li><a href="./settings.html">Settings</a></li>
                <li><a href="./logout.html">Logout</a></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Page content -->
        <div class="row">
          <div class="col-lg-12">
            <h1> Princeton Tournament Match #1 </h1>
            <br>
            <!-- Filter -->
            <div class="col-lg-8">
            <video id="my-video" class="video-js" controls preload="auto" width="720" height="480"
            poster="https://dl.dropboxusercontent.com/s/s8bo0smokjc9owi/fencebad.png" data-setup="{}">
              <source src="https://dl.dropboxusercontent.com/s/cyfg10lgpxr8swp/fencebad.mp4" type="video/mp4">

              <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
              </p>
            </video>

            <div class="dropdown">
              <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Share With
              <span class="caret"></span></button>
              <ul class="dropdown-menu">
                <li><a href="#">Team</a></li>
                <li><a href="#">Coaches</a></li>
                <li><a href="#">Only Me</a></li>
              </ul>
            </div>
            </div>
            <div class = "col-lg-4">
               <!-- Comments component -->
              <div id="comments">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <!-- Menu Toggle Script -->
  <script>
  $("#menu-toggle").click(function(e) {
    e.preventDefault();
    $("#wrapper").toggleClass("toggled");
  });

  $(document).on('click', '.compare-btn', function() {
    window.location.href = "./compare.html";
  });

  </script>



</body>

</html>
