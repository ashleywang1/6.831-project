<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
  <meta name="6.813 User Interface Project" content="">
  <meta name="Ashley Wang, Rui Song, Heeyoon Kim, Kelly Qi" content="">
  <title>BFS</title>

  <!-- Bootstrap Core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- animate.css from https://github.com/daneden/animate.css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">

  <!-- Custom CSS -->
  <link href="css/simple-sidebar.css" rel="stylesheet">
  <link href="css/bfs.css" rel="stylesheet">
  <link href="css/popup.css" rel="stylesheet">
  <link href="css/compare.css" rel="stylesheet">
  
  <!-- Custom CSS for comments section-->
  <link href="css/comments.css" rel="stylesheet">

  <!--videojs-->
  <link href="http://vjs.zencdn.net/5.19.1/video-js.css" rel="stylesheet">
  <link href="css/videojs.markers.css" rel="stylesheet">
  <!-- If you'd like to support IE8 -->
  <script src="http://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>

  <!--NOTE: We use the videojs library:  http://videojs.com/-->
  <!--NOTE: We use the videojs-markers plugin for videojs: https://github.com/spchuang/videojs-markers -->
  <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
  <script src="http://vjs.zencdn.net/5.19.1/video.js"></script>
  <script src='js/videojs-markers.js'></script>

  <!--magnific-popup CSS and JS-->
  <link href="css/magnific-popup.css" rel="stylesheet">
  <script src="js/magnific-popup.js"></script>

  <!--NOTE: We use the videojs-framebyframe plugin: https://github.com/erasche/videojs-framebyframe-->
  <!--videojs.framebyframe.js-->
  <script src="js/videojs-framebyframe.js"></script>

  <!-- jQuery -->
  <!-- <script src="js/jquery.js"></script> -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.2/jquery.scrollTo.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script src="js/bootstrap.min.js"></script>
</head>

<body>
  <div class="container-fluid">
    <div class="row" id="headerContainer" position="fixed">
    </div>
    <div class="row" id="page">
      <div id="wrapper" class="">
        <div id="sidebar-wrapper">
        </div>
      </div>
      <div id="page-content-wrapper">
        <div class="row">
          <div id="menu-margin" class="col-lg-1"></div>
          <div class="col-sm-6">
          <div id="wrapper">
            <div id="videoContainer">
              <video id="my-video" class="video-js vjs-default-skin vjs-16-9 vjs-big-play-centered" controls preload="auto" data-setup='{ "playbackRates": [0.25,0.5,0.75, 1]}'>

                <source src="https://dl.dropboxusercontent.com/s/wh4g1tobc9i8lph/Amateurs.mp4" type="video/mp4">

                <p class="vjs-no-js">
                  To view this video please enable JavaScript, and consider upgrading to a web browser that
                  <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
                </p>
              </video>
            </div>
            </div>
            <div>
            <div class="row">
              <div class="col-sm-8">
                <h3><span id="privacy-icon" class="glyphicon glyphicon-lock"></span> Princeton Tournament Match #1 
                </div>
                <div class="col-sm-4">
                  <div class="dropdown priv">
                    <b> Shared With </b> <button class="btn btn-default dropdown-toggle" type="button" data-toggle="dropdown">Only Me <span class="caret"></span></button>
                    <ul class="dropdown-menu pull-left">
                      <li><a href="javascript:void(0);">Team</a></li>
                      <li class="dropdown-selected priv"><a href="javascript:void(0);">Coaches</a></li>
                      <li><a href="javascript:void(0);">Only Me</a></li>
                    </ul>
                  </div>
                </div></h3>
              </div>
              <h4> Jeb Tree  - Posted on January 11th, 2017</h4>
              <br>
              <h5> Coach Summary </h5>
              <p>
                Jeb's first match was him facing a sneaky opponent that had instinctively good timing for finding points. Unfortunately, Jeb gave up a few points in the beginning and was forced to look for points aggressively. Jeb showed much better control and movement later, but his opponent was able to end with a bigger lead than the match reflected when Jeb tried hard to tie at the end (11-18 L). The way Jeb is fighting and moving about, I feel like the match would have been completely different if the opponent hadn't got the early lead. Working on blocking effectively will make a big difference against this type of opponent in the future.
              </p>
            </div>
            
          </div>
          <div class="col-sm-4">
             <!-- Comments component -->
            <div id="comments">
            </div>
          </div>
          <!-- Popup compare -->
          <a href="#test-popup" class="open-popup-link" id="hidden-anchor">Open player</a>
          <div id="test-popup" class="player mfp-hide animated fadeIn">
            <section><div id="one">You</div>
            <div id="two">Pro</div></section>
            <video id="example_video_1" class="video-js" controls preload="auto" width="663" data-setup='{ "playbackRates": [0.25, 0.50, 0.75, 1], "fluid":true}'>

              <source src="https://dl.dropboxusercontent.com/s/oirs3criyqcaxm1/comp1.mp4" type="video/mp4">
              <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
              </p>
            </video>
<!--             <section id="display-surround">
 -->              <div id="display-comment">Cheese</div>
<!--             </section>         
 -->          </div>
        </div>
      </div>
    </div>
    <div class="row" id="footerContainer"></div>
  </div>
  <script src="js/baseTemplate.js"></script>
  <script>
    var markers = [
      {time: 13, text: "advance is OK, knees could be more bent, maintain more distance between front and back foot", 
      coach: "Clinton", end_time: 16},
      {time: 18,  text: " advance + lunge, too slow", coach: "Kennedy", end_time: 23},
      {time: 39,text: "twitched before lunge. lunge bad, want arms to help", coach: "Clinton", end_time: 44},
      {time: 51,  text: " too many advances", coach: "Clinton", end_time: 56},
      {time: 57,  text: " too many advances", coach: "Clinton", end_time: 60},
      {time: 62,  text: "advance, feet come too close together, basically walking in a straight line", coach: "Kennedy", end_time: 64},
      {time: 65,  text: "flèche try, didn’t work out, PARRIED ", coach: "Clinton", end_time: 70},
      {time: 73,  text: "lunge, too low on the knees, leg movement is too exaggerated, trying to feint", coach: "Kennedy", end_time: 75}, 
      {time: 165,  text: "flèche try, didn’t work out, PARRIED ", coach: "Clinton", end_time: 170},
      {time: 183,  text: "lunge, too low on the knees, leg movement is too exaggerated, trying to feint", coach: "Kennedy", end_time: 188},
      {time: 207,  text: "body too leaned forward", coach: "Clinton", end_time: 212}
    ];
  </script>
  <script src="js/video.js"></script>
  <script>

    var markersDict = {13:0,18:1,39:2,51:3,131:4,165:5,183:6,207:7};

    $(document).ready(function(){
      loadInHeaderAndFooter();
      loadInMenu();

      //Adapted from: https://erasche.github.io/videojs-framebyframe/
      var coolVideo = videojs('example_video_1', {
        controls: true,
        preload: 'auto',
        plugins: {
          framebyframe: {
            fps: 23.98,
            steps: [{
              text: '|<<',
              step: -1,
              index: 3
            }, {
              text: '>>|',
              step: 1,
              index: 4
            }, ],
          }
        },
        //removing volume control button
        controlBar: {
          volumeMenuButton: false,
          remainingTimeDisplay: false
        }
      });   
    });

    $(document).on('click', '#menu-toggle', function() {
      console.log('hello');
      if ($("#wrapper").attr('class') == "") {
        $("[id=menu-margin]").animate({
          width: "16%"
        }, 0.5)
      } else {
        $("[id=menu-margin]").animate({
          width: "8%"
        }, 0.5)
      }
    });

    $(document).on('click', '.priv .dropdown-menu a', function(evt) {
      var selection = evt.currentTarget.innerHTML;
      $(".priv button").html(selection + " <span class=\"caret\"></span>");

      if (selection == "Team" || selection == "Coaches") {
        $("#notification").text("You've shared a video with the " + selection + "!");
        $("#notifications").html("<span class=\"glyphicon glyphicon-bell\"></span><span class=\"label label-danger\" style=\"font-size:8px\">1</span>")
        $("#privacy-icon").removeClass("glyphicon glyphicon-lock").addClass("glyphicon glyphicon-globe");
      } else {
        $("#notification").text("You've removed a video from Team Videos.");
        $("#notifications").html("<span class=\"glyphicon glyphicon-bell\"></span><span class=\"label label-danger\" style=\"font-size:8px\">1</span>")
        $("#privacy-icon").removeClass("glyphicon glyphicon-globe").addClass("glyphicon glyphicon-lock");
      }
    });

    $(document).on('click', '#notifications', function() {
      $("#notifications").html("<span class=\"glyphicon glyphicon-bell\"></span>")
    });

    videojs.options.flash.swf = "video-js.swf";

    $(document).on('click', '.compare-btn', function() {
      var markerTime = parseInt($(this).attr('id').match(/\d+/));
      var markerId = markersDict[markerTime];

      // var item = markers[markerId].text
      var item = "<b>" + Math.floor(markers[markerId].time/60) + ":" + formatMinutes(markers[markerId].time%60) + "</b>: " + markers[markerId].text;
      $("#display-comment").html(item);
      $('.open-popup-link')[0].click();
    });

    $('.open-popup-link').magnificPopup({
      type: 'inline',
      midClick: true,
      showCloseBtn:false
    });

    $('.open-popup-link').on('click', function() {
      videojs('my-video').pause();
      videojs('example_video_1').play();
      videojs('example_video_1').pause();
    })

  </script>

  <style>
    .player {
      width: 60%;
      margin-left: auto;
      margin-right: auto;
      background:black;
    }
  </style>

</body>

</html>