<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, shrink-to-fit=no, initial-scale=1">
  <meta name="description" content="">
  <meta name="author" content="">

  <title>BFS</title>

  <!-- Bootstrap Core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">

  <!-- Custom CSS -->
  <link href="css/simple-sidebar.css" rel="stylesheet">
  
  <!-- Custom CSS for comments section-->
  <link href="css/comments.css" rel="stylesheet">
  <!--videojs-->
  <link href="http://vjs.zencdn.net/5.19.1/video-js.css" rel="stylesheet">
  <link href="css/videojs.markers.css" rel="stylesheet">
  <!-- If you'd like to support IE8 -->
  <script src="http://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>

  <!--video js -->
  <script src="http://code.jquery.com/jquery-2.0.3.min.js"></script>
  <script src="http://vjs.zencdn.net/5.19.1/video.js"></script>
  <script src='js/videojs-markers.js'></script>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->

  <!-- jQuery -->
  <script src="js/jquery.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-scrollTo/2.1.2/jquery.scrollTo.min.js"></script>
  <!-- Bootstrap Core JavaScript -->
  <script src="js/bootstrap.min.js"></script>
  <script>

            
   $(document).ready(function(){

      var player = videojs('#my-video', {
        controls: true,
        autoplay: true,
        preload: 'auto'
      });

      var markers = [
        {time: 13, text: "advance is OK, knees could be more bent, maintain more distance between front and back foot", coach: "Clinton"},
        {time: 18,  text: " advance + lunge, too slow", coach: "Kennedy"},
        {time: 39,text: "twitched before lunge. lunge bad, want arms to help", coach: "Clinton"},
        {time: 51,  text: " too many advances", coach: "Clinton"},
        {time: 131,  text: "advance, feet come too close together, basically walking in a straight line", coach: "Kennedy"},
        {time: 165,  text: "flèche try, didn’t work out, PARRIED ", coach: "Clinton"},
        {time: 183,  text: "lunge, too low on the knees, leg movement is too exaggerated, trying to feint", coach: "Kennedy"},
        {time: 207,  text: "body too leaned forward", coach: "Clinton"},
        {time: 219,  text: "bad lunge, ankle folded underneath, could lead to injury, back foot should not leave ground", coach: "Clinton"},
        {time: 260,  text: "feet are too close, can’t retreat from this position", coach: "Clinton"},
        {time: 299,  text: " please do not kick your opponent", coach: "Kennedy"},
        {time: 350,  text: " bad fleche, don’t collide into your opponent. why did you take a knee?", coach: "Kennedy"}
      ];

      //load the marker plugin
       player.markers({
          markerStyle: {
           // 'width':'15px',
           // 'height':'3px',
           'background-color': '#31cbd5'
          },
          markerTip:{
             display: true,
             text: function(marker){
                return Math.floor(marker.time/60) + ":" + marker.time%60;
             },
             time: function(marker) {
                 return marker.time;
              }
          },
          // breakOverlay:{
          //    display: true,
          //    displayTime: 3,
          //    text: function(marker) {
          //       return  marker.text;
          //    }
          // },
          onMarkerReached: function(marker) {
            console.log(marker);
            $(".comment-text").addClass("truncate");
            $(".comment-text").removeAttr("style", "background-color");
            $(".compare-btn").css("display", "none");
            $("#" + marker.time).css("background-color", "#CCFFFF");
            $("#" + marker.time).removeClass("truncate");
            $("#" + marker.time).focus();
            $('#comments').scrollTo($('#' + marker.time));
            $("#compare-btn" + marker.time).css("display", "block");
          },
          markers: markers
       });

       //pausing player
      player.pause();

      // insert marker list
      for(var i =0; i < markers.length; i++){

         var item = $("<div class='comment-text truncate' id=" + markers[i].time + " data-index='"+i+"'>"+ Math.floor(markers[i].time/60) + ":" + markers[i].time%60 + ": " + markers[i].text+"</div><div class='coach-contact' id='coach-contact" + markers[i].time +"'>Posted by "+ markers[i].coach + "</div><button class='btn btn-info compare-btn' id='compare-btn" + markers[i].time + "' style='display:none'>Compare Self to Pro</button>");
         $("#comments").append(item);
      }

      // set up click event
      $(".comment-text").click(function(){
         var index = $(this).data("index");
         $(".comment-text").addClass("truncate");
         $(".comment-text").removeAttr("style", "background-color");
         $(".compare-btn").css("display", "none");

         $(this).removeClass("truncate");
         $(this).css("background-color", "#CCFFFF");
         $("#compare-btn" + markers[index].time).css("display", "block");
         player.currentTime(markers[index].time);
      });

   });
   // listener for privacy dropdown
   $(function(){
    $(".dropdown-menu li").click(function() {
      console.log("hello")
      $(".dropdown-menu li").removeClass("selected");
      $(this).addClass("selected");
    });
  });

  </script>

</head>

<body>
  <div id="wrapper" class="toggled">
    <!-- Sidebar -->
    <div id="sidebar-wrapper">
      <ul class="sidebar-nav">
        <li>
          <a href="./index.html">My Videos</a>
        </li>
        <li>
          <a href="./team.html" id="highlight">Team Videos</a>
        </li>
        <li>
          <a href="./contact.html">Contact</a>
        </li>
      </ul>
    </div>
    <div id="page-content-wrapper">
      <div class="container-fluid">
        <!-- Header row -->
        <div class="row">
          <div class="col-lg-8">
            <!-- Search bar at the top -->
            <form onsubmit="search()" align="center">
              <div class="input-group">
                <input id="searchInput" type="Search" placeholder="Search..." class="form-control" />
                <div class="input-group-btn">
                  <button class="btn btn-info">
                    <span class="glyphicon glyphicon-search"></span>
                  </button>
                </div>
              </div>
            </form>
          </div>
          <div class="col-lg-3"></div>
          <div class="col-lg-1">
            <!-- Profile icon at the top -->
            <div class="dropdown">
              <img src="./images/profile.png" height="34px" class="dropdown-toggle" id="profile" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true">
              <ul class="dropdown-menu pull-right" aria-labelledby="dropdownMenu1">
                <li class="dropdown-header">Welcome, Jeb Tree!</li>
                <li role="separator" class="divider"></li>
                <li><a href="./settings.html">Settings</a></li>
                <li><a href="./logout.html">Logout</a></li>
              </ul>
            </div>
          </div>
        </div>

        <!-- Page content -->
        <div class="row">
          <div class="col-lg-6">
            <br>
            <!-- Filter -->
            <video id="my-video" class="video-js" data-setup='{"fluid": true}' controls preload="auto" width="663"
            poster="https://dl.dropboxusercontent.com/s/s8bo0smokjc9owi/fencebad.png" data-setup='{ "playbackRates": [0.5, 1, 2] }'>
              <source src="https://dl.dropboxusercontent.com/s/cyfg10lgpxr8swp/fencebad.mp4" type="video/mp4">

              <p class="vjs-no-js">
                To view this video please enable JavaScript, and consider upgrading to a web browser that
                <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a>
              </p>
            </video>
          </div>
          <div class = "col-lg-6">
             <!-- Comments component -->
            <div id="comments">
            </div>
          </div>
        </div>
        <div class="row">
          <div class = "col-lg-8">
            <div>
              <h3> Princeton Tournament Match #1 </h3>
              <h4> Barack Ohama  - Posted on January 10th, 2017</h4>
              <br>
              <h5> Coach Summary </h5>
              <p>
                Barack's first match was him facing a weak opponent that had instinctively bad timing for finding points. Fortunately, his opponent gave up a few points in the beginning and was forced to look for points aggressively. Barack showed better control and movement later, and ended with a bigger lead. The way Barack is fighting and moving about, I feel like the match could have ended earlier. Working on blocking effectively will make an even bigger difference against this type of opponent in the future.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>
  <script>
  <!-- Menu Toggle Script -->

  $(document).on('click', '.compare-btn', function() {
    window.location.href = "./compare.html";
  });

  $('#profile').css('cursor', 'pointer');


  </script>



</body>

</html>
